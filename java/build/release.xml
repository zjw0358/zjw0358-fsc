<?xml version="1.0" encoding="UTF-8"?>
<project default="release">

    <property name="distribution" value="output/dist"/>
    <property file="${distribution}/build.properties"/>
    <property name="release.version" value="0.${build.number}.${stored.build.number}"/>
    <property name="release.name" value="webfabric.${release.version}"/>
    <property name="release.notes" value=""/>

    <taskdef classname="net.bluecow.googlecode.ant.GoogleCodeUploadTask"
             classpath="lib/ant-googlecode-0.0.1.jar"
             name="gcupload"/>

    <macrodef name="upload">
        <attribute name="source"/>
        <attribute name="destination"/>
        <attribute name="summary"/>
        <attribute name="labels" default=""/>

        <sequential>
            <gcupload username="${release.username}" password="${release.password}"
                      projectname="webfabric"
                      filename="${distribution}/@{source}" targetfilename="@{destination}"
                      summary="@{summary}" labels="@{labels}"/>
        </sequential>
    </macrodef>

    <target name="release">
        <upload source="${stored.build.name}.jar" destination="${release.name}.jar"
                summary="Core WebFabric Library (${release.version}). ${release.notes}"/>
        <upload source="${stored.build.name}.src.zip" destination="${release.name}.src.zip"
                summary="Source zip for IDE intellisense support (${release.version}). ${release.notes}"/>
        <!--upload file="${stored.build.name}.war" destination="${release.name}.war"
                summary="Example Web App (${release.version})"/-->
    </target>
</project>
