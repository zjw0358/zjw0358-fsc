<?xml version="1.0" encoding="UTF-8"?>
<project default="release">

    <property name="distribution" value="artifacts"/>
    <property file="${distribution}/release.properties"/>

    <taskdef classname="net.bluecow.googlecode.ant.GoogleCodeUploadTask"
             classpath="lib/ant-googlecode-0.0.1.jar"
             name="gcupload"/>

    <taskdef resource="net/sf/antcontrib/antlib.xml"
             classpath="lib/ant-contrib.jar"/>

    <macrodef name="upload">
        <attribute name="source"/>
        <attribute name="destination"/>
        <attribute name="summary"/>
        <attribute name="labels" default=""/>

        <sequential>
            <gcupload username="${release.username}" password="${release.password}"
                      projectname="${release.name}"
                      filename="${distribution}/@{source}" targetfilename="@{destination}"
                      summary="@{summary}" labels="@{labels}"/>
        </sequential>
    </macrodef>

    <target name="release">
        <for list="${release.files}" param="file">
            <sequential>
                <upload source="@{file}" destination="@{file}" labels="${@{file}.labels}"
                        summary="${@{file}.description}"/>
            </sequential>
        </for>
    </target>
</project>
